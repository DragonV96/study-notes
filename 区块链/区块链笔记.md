# 区块链笔记

## 1 区块链基础

### 1.1 背景

**1. 概念**

区块链是一个分布式网络。

**2. 作用**

- 区块链可以帮助多个节点达成共识去记录和 Token 相关的事情；
- 区块链可以帮助所有人无门槛地构建属于自己的小经济系统。

### 1.2 区块链基本操作

- 公开记账：记载每一笔 Transaction，即记载每一笔交易的付款人、收款人和付款金额。
- 创建创世区块
- 交易（Transaction）
- 打包 Transaction（挖矿）
- 广播交易：将打包好的 Transaction 广播到所有区块上

### 1.3 共识机制

#### 1.3.1 基础信息

**1. 概念**

共识机制是区块链是核心技术之一。

**2. 作用**

它决定了区块链的：

- 业务吞吐量
- 交易速度
- 不可篡改性
- 准入门槛

**3. 目的**

共识机制主要解决了两个问题：

- 谁有权力（如记账）
- 作弊问题

#### 1.3.2 PoW 工作量证明

**1. 概念**

PoW （Proof of Work）工作量证明，它有两个概念：

- 计算资源（算力）是决定记账权力的唯一因素；
- 计算难度（挖矿难度），计算难度是区块链为了控制产生答案的速度。

**2. 规则**

所有记账节点都会遵循以下两条规则：

- 规则一：一个代币如果已经被花费，那么会被标记成已花费，如果再次接收到这个代币被花费的请求，那么记账节点会拒绝打包这笔交易；
- 规则二：如果同时接收到两个已打包区块，这两个已打包区块中装的两笔交易出现了一个代币被花费了两次的情况，这种情况也就是我们所说的分叉（Fork），那么选择挖矿难度比较大的那个已打包区块。

> 规则一避免了未确认交易的双花攻击，规则二基本避免已经确认的交易中（已打包区块中）的双花问题。

#### 1.3.3 

### 1.4 区块链问题

#### 1.4.1 拜占庭将军问题

**1. 隐含该问题的共识机制**

- PoW（工作量证明）
- 

**2. 概念**

拜占庭将军问题可以简单分为两个问题：

- 节点精分：即 A 节点广播到 D 节点的信息为投票给 B 节点，但广播到 D 节点的信息为投票给  B 节点；
- 中继结点作弊：即中继节点篡改上一个节点的投票消息。

（更完整具体的内容未完待续）

**3. 解决方案**

#### 1.4.2 双花攻击

**1. 概念**

双花攻击（double-spending），指一个代币被花费了两次。